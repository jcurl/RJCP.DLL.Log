<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="324px" preserveAspectRatio="none" style="width:811px;height:324px;background:#FFFFFF;" version="1.1" viewBox="0 0 811 324" width="811px" zoomAndPan="magnify"><defs><filter height="300%" id="f1enxu90kmi7es" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[ace027bf483721c23d5316e550f7b06b]
class DltTraceWriterFactory--><rect codeLine="1" fill="#FEFECE" filter="url(#f1enxu90kmi7es)" height="75.6719" id="DltTraceWriterFactory" style="stroke:#A80036;stroke-width:1.5;" width="369" x="56.5" y="10"/><ellipse cx="110.25" cy="26" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M113.0156,21.875 Q113.1719,21.6563 113.3594,21.5469 Q113.5469,21.4375 113.7656,21.4375 Q114.1406,21.4375 114.375,21.6953 Q114.6094,21.9531 114.6094,22.5625 L114.6094,24.0156 Q114.6094,24.625 114.375,24.8906 Q114.1406,25.1563 113.7656,25.1563 Q113.4219,25.1563 113.2188,24.9531 Q113.0156,24.7656 112.9063,24.25 Q112.8594,23.8906 112.6719,23.7031 Q112.3438,23.3281 111.7344,23.1094 Q111.125,22.8906 110.5,22.8906 Q109.7344,22.8906 109.1016,23.2188 Q108.4688,23.5469 107.9766,24.2969 Q107.4844,25.0469 107.4844,26.0781 L107.4844,27.1719 Q107.4844,28.4063 108.375,29.2266 Q109.2656,30.0469 110.8594,30.0469 Q111.7969,30.0469 112.4531,29.7969 Q112.8438,29.6406 113.2656,29.2031 Q113.5313,28.9375 113.6797,28.8594 Q113.8281,28.7813 114.0313,28.7813 Q114.3594,28.7813 114.6172,29.0391 Q114.875,29.2969 114.875,29.6406 Q114.875,29.9844 114.5313,30.3906 Q114.0313,30.9688 113.2344,31.2969 Q112.1563,31.75 110.8594,31.75 Q109.3438,31.75 108.1406,31.125 Q107.1563,30.625 106.4688,29.5547 Q105.7813,28.4844 105.7813,27.2031 L105.7813,26.0469 Q105.7813,24.7188 106.3984,23.5703 Q107.0156,22.4219 108.1094,21.8047 Q109.2031,21.1875 110.4375,21.1875 Q111.1719,21.1875 111.8203,21.3516 Q112.4688,21.5156 113.0156,21.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="130.75" y="30.9102">DltTraceWriterFactory</text><rect fill="#FFFFFF" height="17.0938" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="134" x="294.5" y="7"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="132" x="295.5" y="20.457">TLine:DltTraceLineBase</text><line style="stroke:#A80036;stroke-width:1.5;" x1="57.5" x2="424.5" y1="42" y2="42"/><line style="stroke:#A80036;stroke-width:1.5;" x1="57.5" x2="424.5" y1="50" y2="50"/><ellipse cx="67.5" cy="61" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="342" x="76.5" y="65.4189">CreateAsync(stream: Stream): Task&lt;ITraceWriter&lt;DltTraceLineBase&gt;&gt;</text><ellipse cx="67.5" cy="74.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="343" x="76.5" y="79.2549">CreateAsync(fileName: string): Task&lt;ITraceWriter&lt;DltTraceLineBase&gt;&gt;</text><!--MD5=[11363600cc92b2fece27b28de66320bf]
class DltTraceEncoder--><rect codeLine="6" fill="#FEFECE" filter="url(#f1enxu90kmi7es)" height="61.8359" id="DltTraceEncoder" style="stroke:#A80036;stroke-width:1.5;" width="294" x="503" y="17"/><ellipse cx="533.3" cy="33" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M536.0656,28.875 Q536.2219,28.6563 536.4094,28.5469 Q536.5969,28.4375 536.8156,28.4375 Q537.1906,28.4375 537.425,28.6953 Q537.6594,28.9531 537.6594,29.5625 L537.6594,31.0156 Q537.6594,31.625 537.425,31.8906 Q537.1906,32.1563 536.8156,32.1563 Q536.4719,32.1563 536.2688,31.9531 Q536.0656,31.7656 535.9563,31.25 Q535.9094,30.8906 535.7219,30.7031 Q535.3938,30.3281 534.7844,30.1094 Q534.175,29.8906 533.55,29.8906 Q532.7844,29.8906 532.1516,30.2188 Q531.5188,30.5469 531.0266,31.2969 Q530.5344,32.0469 530.5344,33.0781 L530.5344,34.1719 Q530.5344,35.4063 531.425,36.2266 Q532.3156,37.0469 533.9094,37.0469 Q534.8469,37.0469 535.5031,36.7969 Q535.8938,36.6406 536.3156,36.2031 Q536.5813,35.9375 536.7297,35.8594 Q536.8781,35.7813 537.0813,35.7813 Q537.4094,35.7813 537.6672,36.0391 Q537.925,36.2969 537.925,36.6406 Q537.925,36.9844 537.5813,37.3906 Q537.0813,37.9688 536.2844,38.2969 Q535.2063,38.75 533.9094,38.75 Q532.3938,38.75 531.1906,38.125 Q530.2063,37.625 529.5188,36.5547 Q528.8313,35.4844 528.8313,34.2031 L528.8313,33.0469 Q528.8313,31.7188 529.4484,30.5703 Q530.0656,29.4219 531.1594,28.8047 Q532.2531,28.1875 533.4875,28.1875 Q534.2219,28.1875 534.8703,28.3516 Q535.5188,28.5156 536.0656,28.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92" x="550.7" y="37.9102">DltTraceEncoder</text><rect fill="#FFFFFF" height="17.0938" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="134" x="666" y="14"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="132" x="667" y="27.457">TLine:DltTraceLineBase</text><line style="stroke:#A80036;stroke-width:1.5;" x1="504" x2="796" y1="49" y2="49"/><line style="stroke:#A80036;stroke-width:1.5;" x1="504" x2="796" y1="57" y2="57"/><ellipse cx="514" cy="68" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="268" x="523" y="72.4189">Encode(buffer: Span&lt;byte&gt;, line: DltTraceLineBase): int</text><!--MD5=[346848954f2c731883873e681a96221f]
class DltFileTraceWriterFactory--><rect codeLine="10" fill="#FEFECE" filter="url(#f1enxu90kmi7es)" height="48" id="DltFileTraceWriterFactory" style="stroke:#A80036;stroke-width:1.5;" width="169" x="28.5" y="147"/><ellipse cx="43.5" cy="163" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M46.2656,158.875 Q46.4219,158.6563 46.6094,158.5469 Q46.7969,158.4375 47.0156,158.4375 Q47.3906,158.4375 47.625,158.6953 Q47.8594,158.9531 47.8594,159.5625 L47.8594,161.0156 Q47.8594,161.625 47.625,161.8906 Q47.3906,162.1563 47.0156,162.1563 Q46.6719,162.1563 46.4688,161.9531 Q46.2656,161.7656 46.1563,161.25 Q46.1094,160.8906 45.9219,160.7031 Q45.5938,160.3281 44.9844,160.1094 Q44.375,159.8906 43.75,159.8906 Q42.9844,159.8906 42.3516,160.2188 Q41.7188,160.5469 41.2266,161.2969 Q40.7344,162.0469 40.7344,163.0781 L40.7344,164.1719 Q40.7344,165.4063 41.625,166.2266 Q42.5156,167.0469 44.1094,167.0469 Q45.0469,167.0469 45.7031,166.7969 Q46.0938,166.6406 46.5156,166.2031 Q46.7813,165.9375 46.9297,165.8594 Q47.0781,165.7813 47.2813,165.7813 Q47.6094,165.7813 47.8672,166.0391 Q48.125,166.2969 48.125,166.6406 Q48.125,166.9844 47.7813,167.3906 Q47.2813,167.9688 46.4844,168.2969 Q45.4063,168.75 44.1094,168.75 Q42.5938,168.75 41.3906,168.125 Q40.4063,167.625 39.7188,166.5547 Q39.0313,165.4844 39.0313,164.2031 L39.0313,163.0469 Q39.0313,161.7188 39.6484,160.5703 Q40.2656,159.4219 41.3594,158.8047 Q42.4531,158.1875 43.6875,158.1875 Q44.4219,158.1875 45.0703,158.3516 Q45.7188,158.5156 46.2656,158.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137" x="57.5" y="167.9102">DltFileTraceWriterFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="29.5" x2="196.5" y1="179" y2="179"/><line style="stroke:#A80036;stroke-width:1.5;" x1="29.5" x2="196.5" y1="187" y2="187"/><path d="M6,256 L6,315.0547 A0,0 0 0 0 6,315.0547 L220,315.0547 A0,0 0 0 0 220,315.0547 L220,266 L210,256 L117,256 L113,195.04 L109,256 L6,256 A0,0 0 0 0 6,256 " fill="#FBFB77" filter="url(#f1enxu90kmi7es)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M210,256 L210,266 L220,266 L210,256 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="12" y="274.4951">Gives DltTraceWriterFactory the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="12" y="290.8467">DltFileTraceEncoderFactory. This</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="12" y="307.1982">is just a very thin class.</text><!--MD5=[0b6c76bfc1667e0a878fc7f7e55a1331]
class DltFileTraceEncoderFactory--><rect codeLine="18" fill="#FEFECE" filter="url(#f1enxu90kmi7es)" height="48" id="DltFileTraceEncoderFactory" style="stroke:#A80036;stroke-width:1.5;" width="183" x="301.5" y="147"/><ellipse cx="316.5" cy="163" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M319.2656,158.875 Q319.4219,158.6563 319.6094,158.5469 Q319.7969,158.4375 320.0156,158.4375 Q320.3906,158.4375 320.625,158.6953 Q320.8594,158.9531 320.8594,159.5625 L320.8594,161.0156 Q320.8594,161.625 320.625,161.8906 Q320.3906,162.1563 320.0156,162.1563 Q319.6719,162.1563 319.4688,161.9531 Q319.2656,161.7656 319.1563,161.25 Q319.1094,160.8906 318.9219,160.7031 Q318.5938,160.3281 317.9844,160.1094 Q317.375,159.8906 316.75,159.8906 Q315.9844,159.8906 315.3516,160.2188 Q314.7188,160.5469 314.2266,161.2969 Q313.7344,162.0469 313.7344,163.0781 L313.7344,164.1719 Q313.7344,165.4063 314.625,166.2266 Q315.5156,167.0469 317.1094,167.0469 Q318.0469,167.0469 318.7031,166.7969 Q319.0938,166.6406 319.5156,166.2031 Q319.7813,165.9375 319.9297,165.8594 Q320.0781,165.7813 320.2813,165.7813 Q320.6094,165.7813 320.8672,166.0391 Q321.125,166.2969 321.125,166.6406 Q321.125,166.9844 320.7813,167.3906 Q320.2813,167.9688 319.4844,168.2969 Q318.4063,168.75 317.1094,168.75 Q315.5938,168.75 314.3906,168.125 Q313.4063,167.625 312.7188,166.5547 Q312.0313,165.4844 312.0313,164.2031 L312.0313,163.0469 Q312.0313,161.7188 312.6484,160.5703 Q313.2656,159.4219 314.3594,158.8047 Q315.4531,158.1875 316.6875,158.1875 Q317.4219,158.1875 318.0703,158.3516 Q318.7188,158.5156 319.2656,158.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151" x="330.5" y="167.9102">DltFileTraceEncoderFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="302.5" x2="483.5" y1="179" y2="179"/><line style="stroke:#A80036;stroke-width:1.5;" x1="302.5" x2="483.5" y1="187" y2="187"/><path d="M295,264 L295,306.7031 A0,0 0 0 0 295,306.7031 L491,306.7031 A0,0 0 0 0 491,306.7031 L491,274 L481,264 L397,264 L393,195.04 L389,264 L295,264 A0,0 0 0 0 295,264 " fill="#FBFB77" filter="url(#f1enxu90kmi7es)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M481,264 L481,274 L491,274 L481,264 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="301" y="282.4951">Just knows only how to create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="301" y="298.8467">the DltFileTraceEncoder</text><!--MD5=[679b03fb143eba8299b1b8c94e0bf1ed]
class DltFileTraceEncoder--><rect codeLine="26" fill="#FEFECE" filter="url(#f1enxu90kmi7es)" height="48" id="DltFileTraceEncoder" style="stroke:#A80036;stroke-width:1.5;" width="144" x="578" y="147"/><ellipse cx="593" cy="163" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M595.7656,158.875 Q595.9219,158.6563 596.1094,158.5469 Q596.2969,158.4375 596.5156,158.4375 Q596.8906,158.4375 597.125,158.6953 Q597.3594,158.9531 597.3594,159.5625 L597.3594,161.0156 Q597.3594,161.625 597.125,161.8906 Q596.8906,162.1563 596.5156,162.1563 Q596.1719,162.1563 595.9688,161.9531 Q595.7656,161.7656 595.6563,161.25 Q595.6094,160.8906 595.4219,160.7031 Q595.0938,160.3281 594.4844,160.1094 Q593.875,159.8906 593.25,159.8906 Q592.4844,159.8906 591.8516,160.2188 Q591.2188,160.5469 590.7266,161.2969 Q590.2344,162.0469 590.2344,163.0781 L590.2344,164.1719 Q590.2344,165.4063 591.125,166.2266 Q592.0156,167.0469 593.6094,167.0469 Q594.5469,167.0469 595.2031,166.7969 Q595.5938,166.6406 596.0156,166.2031 Q596.2813,165.9375 596.4297,165.8594 Q596.5781,165.7813 596.7813,165.7813 Q597.1094,165.7813 597.3672,166.0391 Q597.625,166.2969 597.625,166.6406 Q597.625,166.9844 597.2813,167.3906 Q596.7813,167.9688 595.9844,168.2969 Q594.9063,168.75 593.6094,168.75 Q592.0938,168.75 590.8906,168.125 Q589.9063,167.625 589.2188,166.5547 Q588.5313,165.4844 588.5313,164.2031 L588.5313,163.0469 Q588.5313,161.7188 589.1484,160.5703 Q589.7656,159.4219 590.8594,158.8047 Q591.9531,158.1875 593.1875,158.1875 Q593.9219,158.1875 594.5703,158.3516 Q595.2188,158.5156 595.7656,158.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="112" x="607" y="167.9102">DltFileTraceEncoder</text><line style="stroke:#A80036;stroke-width:1.5;" x1="579" x2="721" y1="179" y2="179"/><line style="stroke:#A80036;stroke-width:1.5;" x1="579" x2="721" y1="187" y2="187"/><path d="M541.5,256 L541.5,315.0547 A0,0 0 0 0 541.5,315.0547 L758.5,315.0547 A0,0 0 0 0 758.5,315.0547 L758.5,266 L748.5,256 L654,256 L650,195.04 L646,256 L541.5,256 A0,0 0 0 0 541.5,256 " fill="#FBFB77" filter="url(#f1enxu90kmi7es)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M748.5,256 L748.5,266 L758.5,266 L748.5,256 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="547.5" y="274.4951">Knows how to encode the storage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="547.5" y="290.8467">header, and leaves the rest of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="547.5" y="307.1982">the encoding to DltTraceEncoder</text><!--MD5=[c9bc08ad72a7b62f6089b04552b578f2]
reverse link DltTraceWriterFactory to DltFileTraceWriterFactory--><path codeLine="16" d="M186.87,100.17 C169.73,116.37 151.63,133.49 137.63,146.72 " fill="none" id="DltTraceWriterFactory-backto-DltFileTraceWriterFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="182.21,94.94,201.55,86.29,191.83,105.12,182.21,94.94" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[93adcba3e381fbeb0a3d97962d127514]
link DltFileTraceWriterFactory to DltFileTraceEncoderFactory--><path codeLine="23" d="M197.77,171 C228.78,171 264.11,171 296.1,171 " fill="none" id="DltFileTraceWriterFactory-to-DltFileTraceEncoderFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="301.21,171,292.21,167,296.21,171,292.21,175,301.21,171" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="216" y="164.4951">&lt;&lt;creates&gt;</text><!--MD5=[6cafaf93a876e354dbcbf37da83cd527]
reverse link DltTraceWriterFactory to DltFileTraceEncoderFactory--><path codeLine="24" d="M298.25,94.57 C320.57,112.34 345.2,131.95 363.75,146.72 " fill="none" id="DltTraceWriterFactory-backto-DltFileTraceEncoderFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="287.85,86.29,290.0518,93.1568,297.2371,93.7654,295.0354,86.8987,287.85,86.29" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[58459557c065e31351e07f3d765779f6]
link DltFileTraceEncoderFactory to DltFileTraceEncoder--><path codeLine="33" d="M484.69,171 C513.46,171 544.92,171 572.6,171 " fill="none" id="DltFileTraceEncoderFactory-to-DltFileTraceEncoder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="577.72,171,568.72,167,572.72,171,568.72,175,577.72,171" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="502.75" y="164.4951">«creates»</text><!--MD5=[f5ba13b958448942f3154bdaf48fd9b7]
reverse link DltTraceEncoder to DltFileTraceEncoder--><path codeLine="34" d="M650,99.27 C650,115.85 650,133.48 650,147 " fill="none" id="DltTraceEncoder-backto-DltFileTraceEncoder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="643,99.22,650,79.22,657,99.22,643,99.22" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[41ddef95add42a9cb6fddb27c1161639]
@startuml DLT.WriterFileFactory
class DltTraceWriterFactory<TLine:DltTraceLineBase> {
    +CreateAsync(stream: Stream): Task<ITraceWriter<DltTraceLineBase>>
    +CreateAsync(fileName: string): Task<ITraceWriter<DltTraceLineBase>>
}

class DltTraceEncoder<TLine:DltTraceLineBase> {
    +Encode(buffer: Span<byte>, line: DltTraceLineBase): int
}

class DltFileTraceWriterFactory
note bottom
    Gives DltTraceWriterFactory the
    DltFileTraceEncoderFactory. This
    is just a very thin class.
end note
DltTraceWriterFactory <|-d- DltFileTraceWriterFactory

class DltFileTraceEncoderFactory
note bottom
    Just knows only how to create
    the DltFileTraceEncoder
end note
DltFileTraceWriterFactory -r-> DltFileTraceEncoderFactory : <<creates>
DltTraceWriterFactory o-d- DltFileTraceEncoderFactory

class DltFileTraceEncoder
note bottom
    Knows how to encode the storage
    header, and leaves the rest of
    the encoding to DltTraceEncoder
end note

DltFileTraceEncoderFactory -r-> DltFileTraceEncoder : <<creates>>
DltTraceEncoder <|-d- DltFileTraceEncoder
@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>